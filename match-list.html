<main class="max-w-md mx-auto px-3 py-4">
    <h2 id="pageTitle" class="text-xl font-bold text-emerald-400 mb-6 text-center">Matches</h2>
    <div id="matchContainer" class="space-y-4"></div>
</main>

<script>
(function() {
    const container = document.getElementById('matchContainer');
    const title = document.getElementById('pageTitle');
    
    // localStorage থেকে ক্যাটাগরি নেওয়া
    const categoryId = localStorage.getItem('currentCat');
    
    if (!categoryId) {
        container.innerHTML = "<p class='text-center'>No Category Found!</p>";
        return;
    }

    // সরাসরি window.db ব্যবহার (যা app-ui.js থেকে আসছে)
    const db = window.db; 
    
    // টাইটেল সেট করা
    const titles = {'soloc':'Solo Classic','solocs':'Solo CS','duoc':'Duo Classic','duocs':'Duo CS','squadc':'Squad Classic','squadcs':'Squad CS'};
    title.innerText = titles[categoryId] || "Matches";

    // ডাটা আনা
    firebase.firestore().collection("allMatches").onSnapshot((snapshot) => {
        if(!document.getElementById('matchContainer')) return;
        container.innerHTML = '';
        let count = 0;

        snapshot.forEach((doc) => {
            const match = doc.data();
            if (match.category && match.category.toLowerCase() === categoryId.toLowerCase()) {
                count++;
                container.innerHTML += `
                    <div style="background:#1e293b; border-left:6px solid #10b981; padding:15px; border-radius:15px; margin-bottom:15px;">
                        <div class="flex items-center gap-3">
                            <img src="${match.image}" style="width:50px; height:50px; border-radius:10px; object-fit:cover;">
                            <div class="font-bold text-white">${match.title}</div>
                        </div>
                        <div class="flex justify-between text-sm text-gray-400 mt-3">
                            <span>Entry: ₹${match.entry}</span>
                            <span>Prize: ₹${match.prize}</span>
                        </div>
                        <button onclick="localStorage.setItem('matchId', '${doc.id}'); router.navigate('match-details')" 
                            style="width:100%; background:#10b981; color:white; padding:10px; border-radius:10px; margin-top:10px; font-weight:bold;">
                            VIEW DETAILS
                        </button>
                    </div>`;
            }
        });

        if(count === 0) container.innerHTML = "<p class='text-center py-10 text-gray-500'>No Matches Found</p>";
    });
})();
</script>
